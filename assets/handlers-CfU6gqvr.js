import{a as C,i as S}from"./vendor-CHMhaTs2.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const f of a.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function e(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(r){if(r.ep)return;r.ep=!0;const a=e(r);fetch(r.href,a)}})();const U="https://dummyjson.com",y={PRODUCTS:"/products",PRODUCT_BY_ID:"/products/",CATEGORIES:"/products/category-list",PRODUCTS_BY_CATEGORY:"/products/category/",SEARCH:"/products/search"},g=12,p={CART:"cart",WISHLIST:"wishlist",THEME:"theme"},n={categoriesList:document.querySelector(".categories"),productsList:document.querySelector(".products"),notFound:document.querySelector(".not-found"),searchForm:document.querySelector(".search-form"),searchInput:document.querySelector(".search-form__input"),searchClearBtn:document.querySelector(".search-form__btn-clear"),modal:document.querySelector(".modal"),modalCloseBtn:document.querySelector(".modal__close-btn"),modalProduct:document.querySelector(".modal-product"),modalProductActions:document.querySelector(".modal-product__actions"),addToWishlistBtn:document.querySelector(".modal-product__btn--wishlist"),addToCartBtn:document.querySelector(".modal-product__btn--cart"),modalProductByeBtn:document.querySelector(".modal-product__buy-btn"),cartCount:document.querySelector("[data-cart-count]"),wishlistCount:document.querySelector("[data-wishlist-count]"),cartItemsCount:document.querySelector("[data-count]"),cartTotalPrice:document.querySelector("[data-price]"),buyProductsBtn:document.querySelector(".cart-summary__btn"),loadMoreBtn:document.querySelector(".load-more-btn"),scrollToTopButton:document.querySelector(".scroll-top-btn"),themeToggleBtn:document.querySelector(".theme-toggle-btn")};function A(t){try{const o=localStorage.getItem(t);return o?JSON.parse(o):null}catch(o){return console.error(`Error getting data from localStorage: ${o.message}`),null}}function L(t,o){try{localStorage.setItem(t,JSON.stringify(o))}catch(e){console.error(`Error saving data to localStorage: ${e.message}`)}}function l(){return A(p.CART)||[]}function Y(t){const o=l();o.includes(t)||(o.push(t),L(p.CART,o))}function j(t){const e=l().filter(s=>s!==t);L(p.CART,e)}function u(){return A(p.WISHLIST)||[]}function G(t){const o=u();o.includes(t)||(o.push(t),L(p.WISHLIST,o))}function z(t){const e=u().filter(s=>s!==t);L(p.WISHLIST,e)}function R(t){return l().includes(t)}function q(t){return u().includes(t)}function K(t){L(p.THEME,t)}function M(){return A(p.THEME)||"light"}function J(t){const e=["All",...t].map(r=>`
      <li class="categories__item">
        <button class="categories__btn" type="button" data-category="${r}">${r}</button>
      </li>
    `).join("");n.categoriesList.innerHTML=e;const s=n.categoriesList.querySelector(".categories__btn");s&&s.classList.add("categories__btn--active")}function h(t){const o=t.map(({id:e,thumbnail:s,title:r,brand:a,category:f,price:E})=>`
      <li class="products__item" data-id="${e}">
        <img class="products__image" src="${s}" alt="${r}"/>
        <p class="products__title">${r}</p>
        <p class="products__brand"><span class="products__brand--bold">Brand:</span> ${a}</p>
        <p class="products__category">Category: ${f}</p>
        <p class="products__price">Price: $${E}</p>
      </li>
    `).join("");n.productsList.insertAdjacentHTML("beforeend",o)}function P(){n.productsList.innerHTML=""}function m(){n.notFound.classList.add("not-found--visible")}function B(){n.notFound.classList.remove("not-found--visible")}function _(){n.loadMoreBtn.classList.add("is-hidden"),n.loadMoreBtn.classList.remove("is-loading")}function w(){n.loadMoreBtn.classList.remove("is-hidden")}function V({tags:t,title:o,thumbnail:e,description:s,price:r,id:a}){const f=t?`<ul class="modal-product__tags">${t.map(N=>`<li class="modal-product__tag">${N}</li>`).join("")}</ul>`:"",E=`
    <img class="modal-product__img" src="${e}" alt="${o}" />
    <div class="modal-product__content">
      <p class="modal-product__title">${o}</p>
      ${f}
      <p class="modal-product__description">${s}</p>
      <p class="modal-product__shipping-information">Shipping: Free Shipping</p>
      <p class="modal-product__return-policy">Return Policy: 30 Day Return Policy</p>
      <p class="modal-product__price">Price: $${r}</p>
      <button class="modal-product__buy-btn" type="button">Buy</button>
    </div>
  `;n.modalProduct.innerHTML=E,Q(a)}function Q(t){q(t)?n.addToWishlistBtn.textContent="Remove from Wishlist":n.addToWishlistBtn.textContent="Add to Wishlist",R(t)?n.addToCartBtn.textContent="Remove from Cart":n.addToCartBtn.textContent="Add to Cart"}function X(){n.loadMoreBtn.classList.add("is-loading")}function Z(){n.loadMoreBtn.classList.remove("is-loading")}function T(t,o){n.cartCount.textContent=t.length,n.wishlistCount.textContent=o.length}function $(t){const o=t?t.length:0,e=t?t.reduce((s,r)=>s+r.price,0):0;n.cartItemsCount.textContent=o,n.cartTotalPrice.textContent=`$${e.toFixed(2)}`}C.defaults.baseURL=U;async function tt(){const{data:t}=await C(`${y.CATEGORIES}`);return t}async function k(t=1){const o=(t-1)*g,{data:e}=await C(`${y.PRODUCTS}?limit=${g}&skip=${o}`);return e}async function ot(t){const{data:o}=await C(`${y.PRODUCTS_BY_CATEGORY}${t}`);return o}async function F(t){const{data:o}=await C(`${y.PRODUCT_BY_ID}${t}`);return o}async function W(t="",o=1){const e=(o-1)*g,s=t?`${y.SEARCH}?q=${t}&limit=${g}&skip=${e}`:`${y.SEARCH}?limit=${g}&skip=${e}`,{data:r}=await C(s);return r}async function O(t){return Promise.all(t.map(o=>F(o)))}function c(t,o="success"){const e={message:t,position:"topRight",timeout:5e3};switch(o){case"success":S.success(e);break;case"error":S.error(e);break;case"warning":S.warning(e);break;case"info":S.info(e);break;default:S.error({message:"Invalid type of toast",position:"topRight",timeout:5e3});break}}function et(t,o,e){t.forEach(s=>{s.classList.remove(e)}),o.classList.add(e)}function rt(t){return t.trim().length>0}function b(t,o){Math.ceil(t/g)===o?(_(),c("No more products to load","info")):Z()}async function nt(){const t=l();if(P(),t.length===0){m(),$([]);return}B();try{const o=await O(t);h(o),$(o)}catch(o){console.error("Error loading cart products:",o),c("Failed to load cart products","error"),m()}}async function st(){const t=u();if(P(),t.length===0){n.productsList.innerHTML="",n.notFound.classList.add("not-found--visible");return}n.notFound.classList.remove("not-found--visible");try{const o=await O(t);h(o)}catch(o){console.error("Error loading wishlist products:",o),c("Failed to load wishlist products","error"),n.notFound.classList.add("not-found--visible")}}function v(t){document.body.setAttribute("data-theme",t),document.body.dataset.theme=t,n.themeToggleBtn.innerHTML=t==="light"?"🌙":"☀️"}function ct(){n.modal.classList.add("modal--is-open"),document.body.style.overflow="hidden",window.addEventListener("keydown",x),n.modal.addEventListener("click",D)}function H(){n.modal.classList.remove("modal--is-open"),document.body.style.overflow="",window.removeEventListener("keydown",x),n.modal.removeEventListener("click",D)}function x(t){t.code==="Escape"&&H()}function D(t){t.target===n.modal&&H()}let i=1,d=null,I="";async function it(){const t=M();v(t);const o=l(),e=u();T(o,e);try{const s=await tt();J(s);const{products:r,total:a}=await k(i);if(b(a,i),w(),h(r),r.length===0){c("No products found","info"),m();return}}catch(s){console.error("Error initializing home page:",s),c("Failed to initialize page","error")}}async function dt(t){const o=t.target.closest(".categories__btn");if(o){_(),P();try{const e=o.textContent,s=document.querySelectorAll(".categories__btn");et(s,o,"categories__btn--active");let r;e==="All"?(r=await k(),b(r.total,i),w()):(r=await ot(e),b(r.total,i),w()),r.products.length>0?(h(r.products),B()):m()}catch(e){console.error("Error fetching products by category:",e),c("Failed to load products","error"),m()}}}async function lt(t){const o=t.target.closest(".products__item");if(o)try{const e=Number(o.dataset.id);d=e;const s=await F(e);V(s),ct()}catch(e){console.error("Error fetching product details:",e),c("Failed to load product details","error")}}async function ut(){i+=1,X();try{const{products:t,total:o}=await W(I,i);h(t),b(o,i)}catch(t){console.error("Error loadMore click:",t),c("Failed to loadMore click","error")}}async function mt(t){if(t.preventDefault(),i=1,I=n.searchInput.value,!rt(I)){c("Please enter a valid search query","warning");return}P(),_();try{const{products:o}=await W(I,i);o.length>0?(h(o),B(),w()):m()}catch(o){console.error("Error searching products:",o),c("Failed to search products","error"),m(),_()}}async function pt(){n.searchInput.value="",i=1,P();try{const{products:t,total:o}=await k(i);t.length>0?(h(t),B(),w(),b(o,i)):(m(),_(),console.log("ELSE"))}catch(t){console.error("Error fetching products:",t),c("Failed to load products","error"),m(),_()}}function ft(){if(d)try{R(d)?(j(d),n.addToCartBtn.textContent="Add to Cart",c("Product removed from cart","info")):(Y(d),n.addToCartBtn.textContent="Remove from Cart",c("Product added to cart","success")),T(l(),u())}catch(t){console.error("Error updating cart:",t),c("Failed to update cart","error")}}function ht(){if(d)try{q(d)?(z(d),n.addToWishlistBtn.textContent="Add to Wishlist",c("Product removed from wishlist","info")):(G(d),n.addToWishlistBtn.textContent="Remove from Wishlist",c("Product added to wishlist","success")),T(l(),u())}catch(t){console.error("Error updating wishlist:",t),c("Failed to update wishlist","error")}}async function gt(){d&&c("Product was bought successfully","success")}async function yt(){const t=M();v(t),T(l(),u()),await nt()}function _t(){if(l().length===0){c("Your cart is empty","warning");return}c("Thank you for your purchase!","success"),localStorage.removeItem("cart"),T([],u()),$([]),window.location.reload()}async function Ct(){const t=M();v(t),T(l(),u()),await st()}function Tt(){const t=document.body.getAttribute("data-theme")||"light";console.log(t);const o=t==="light"?"dark":"light";v(o),K(o),n.themeToggleBtn.innerHTML=o==="light"?"🌙":"☀️"}export{ft as a,Tt as b,H as c,ht as d,it as e,dt as f,ut as g,lt as h,Ct as i,mt as j,pt as k,st as l,gt as m,yt as n,nt as o,_t as p,n as r};
//# sourceMappingURL=handlers-CfU6gqvr.js.map
